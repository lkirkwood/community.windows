- name: Enable ntp service in check mode
  win_ntp:
    enabled: true
    type: NTP
  check_mode: yes
  register: enable_check

- name: assert enable check mode
  assert:
    that:
    - enable_check.changed == true

- name: enable ntp service locally
  win_ntp:
    enabled: true
    type: NTP
  register: enable_locally

- name: assert enable locally
  assert:
    that:
      - enable_locally.changed == true

- name: enable ntp service locally (idempotent)
  win_ntp:
    enabled: true
    type: NTP
  register: enable_idempotent

- name: assert enable ntp locally (itempotent)
  assert:
    that:
    - enable_idempotent.changed == false

- name: enable ntp service with peerlist check_mode
  win_ntp:
    peerlist:
      - time.windows.com 
      - time.google.com
      - time.apple.com
    type: NTP
    enabled: true
  check_mode: yes
  register: peerlist_check

- name: assert peerlist check_mode
  assert:
    that:
    - peerlist_check.changed == true

- name: enable ntp service with peerlist 
  win_ntp:
    peerlist:
      - time.windows.com 
      - time.google.com
      - time.apple.com
    type: NTP
    enabled: true
  register: peerlist_local

- name: assert ntp peerlist locally
  assert:
    that:
    - peerlist_local.changed == true

- name: enable ntp service with peerlist (idempotent)
  win_ntp:
    peerlist:
      - time.windows.com 
      - time.google.com
      - time.apple.com
    type: NTP
    enabled: true
  register: peerlist_local

- name: assert ntp peerlist locally
  assert:
    that:
    - peerlist_local.changed == false

- name: enable default factory settings in check_mode
  win_ntp:
    factory_default: true
  check_mode: yes
  register: default_checkmode

- name: assert default settings
  assert:
    that:
    - default_checkmode.changed == true

- name: enable default factory settings locally
  win_ntp:
    factory_default: true
  register: default_locally

- name: assert default factory settings
  assert:
    that:
    - default_locally.changed == true

- name: enable default factory settings locally(Idempotent)
  win_ntp:
    factory_default: true
  register: default_locally

- name: assert default factory settings (Idempotent)
  assert:
    that:
    - default_locally.changed == false
